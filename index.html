<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Heart rate monitoring and breathing exercises for anxiety management">
    <meta name="theme-color" content="#2563eb">
    <title>MindRhythms - Anxiety Management</title>
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjU2M2ViIiBzdHJva2Utd2lkdGg9IjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIwLjg0IDQuNjFhMTUuNzgxIDE1Ljc4MSAwIDAgMC03LjU3MiAyLjczYy0yLjc1Mi44ODMtNS4xNyAyLjczLTcuNTcyIDIuNzMtMi40MDIgMC00LjgyIDEuODQ3LTcuNTcyLTIuNzNBMTUuNzgxIDE1Ljc4MSAwIDAgMCAzLjE2IDQuNjFWMTNBMTAuNSAxMC41IDAgMCAwIDcuNSAyMWg5YTEwLjUgMTAuNSAwIDAgMCA0LjUtOFY0LjYxeiIvPjwvc3ZnPg==">
</head>
<body>
    <div id="onboarding-overlay" class="onboarding-overlay hidden">
        <div class="onboarding-content">
            <div class="onboarding-header">
                <h2>Welcome to MindRhythms</h2>
                <p>Let's set up your profile for personalized heart rate monitoring</p>
            </div>
            
            <form id="onboarding-form" class="onboarding-form">
                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="gender" value="male" required>
                            <span class="radio-text">Male</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="gender" value="female" required>
                            <span class="radio-text">Female</span>
                        </label>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Age Group</label>
                    <select name="ageGroup" class="form-select" required>
                        <option value="">Select your age group</option>
                        <option value="18-25">18-25</option>
                        <option value="26-35">26-35</option>
                        <option value="36-45">36-45</option>
                        <option value="46-55">46-55</option>
                        <option value="56-65">56-65</option>
                        <option value="65+">65+</option>
                    </select>
                </div>

                <button type="submit" class="btn btn-primary onboarding-submit">
                    Continue to App
                </button>
            </form>
        </div>
    </div>

    <div id="app">
        <header class="header">
            <h1 class="header-title">MindRhythms</h1>
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
                <span class="theme-icon">üåô</span>
            </button>
        </header>

        <main class="main">
            <div id="connection-section" class="section">
                <div class="heart-rate-display">
                    <div id="heart-rate-value" class="heart-rate-value">--</div>
                    <div class="heart-rate-unit">bpm</div>
                </div>
                
                <div class="connection-status">
                    <div id="connection-indicator" class="connection-indicator disconnected">
                        <div class="indicator-dot"></div>
                        <span id="connection-text">Not Connected</span>
                    </div>
                    <div id="demo-mode-indicator" class="demo-mode-indicator hidden">
                        <span>üìä Demo mode active</span>
                    </div>
                </div>

                <button id="connect-sensor" class="btn btn-primary">
                    Connect Heart Rate Sensor
                </button>
            </div>

            <div id="breathing-section" class="section hidden">
                <div id="breathing-guide" class="breathing-guide">
                    <div id="breathing-circle" class="breathing-circle">
                        <div class="breathing-inner-circle"></div>
                        <div id="breathing-text" class="breathing-text">Breathe</div>
                    </div>
                </div>

                <div class="breathing-controls">
                    <button id="start-breathing" class="btn btn-secondary">
                        Start Breathing Exercise
                    </button>
                    <button id="stop-breathing" class="btn btn-outline hidden">
                        Stop Exercise
                    </button>
                </div>

                <div id="breathing-timer" class="breathing-timer hidden">
                    <div class="timer-display">
                        <span id="timer-minutes">00</span>:<span id="timer-seconds">00</span>
                    </div>
                </div>
            </div>

            <div id="anxiety-alert" class="anxiety-alert hidden">
                <div class="alert-content">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <h3>Elevated Heart Rate Detected</h3>
                    <p>Your heart rate has been elevated for over a minute. Would you like to try a breathing exercise?</p>
                    <div class="alert-actions">
                        <button id="start-alert-breathing" class="btn btn-primary">
                            Start Breathing
                        </button>
                        <button id="dismiss-alert" class="btn btn-outline">
                            Dismiss
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <footer class="footer">
            <div class="baseline-info">
                <div><span id="baseline-text">Baseline: Calculating...</span></div>
                <div id="expected-baseline" class="expected-baseline hidden">
                    <span id="expected-baseline-text">Expected baseline: -- bpm</span>
                </div>
            </div>
        </footer>
    </div>

    <div id="install-prompt" class="install-prompt hidden">
        <div class="install-content">
            <div class="install-icon">üì±</div>
            <h3>Install MindRhythms</h3>
            <p>Add this app to your home screen for the best experience.</p>
            <div class="install-actions">
                <button id="install-app" class="btn btn-primary">Install</button>
                <button id="dismiss-install" class="btn btn-outline">Not Now</button>
            </div>
        </div>
    </div>

    <div id="debug-panel" class="debug-panel hidden">
        <div class="debug-content">
            <h4>Debug Panel</h4>
            <div class="debug-info">
                <div><strong>Current HR:</strong> <span id="debug-hr">--</span></div>
                <div><strong>Baseline:</strong> <span id="debug-baseline">--</span></div>
                <div><strong>Delta:</strong> <span id="debug-delta">--</span></div>
                <div><strong>HR Buffer:</strong> <span id="debug-buffer">--</span></div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
